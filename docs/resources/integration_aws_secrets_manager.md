---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "infisical_integration_aws_secrets_manager Resource - terraform-provider-infisical"
description: |-
  Create AWS Secrets Manager integration & save to Infisical. Only Machine Identity authentication is supported for this resource.
---

# infisical_integration_aws_secrets_manager (Resource)

**Deprecated:** This resource is deprecated and will be removed in a future version. Use `infisical_secret_sync_aws_secrets_manager` instead.

Create AWS Secrets Manager integration & save to Infisical. Only Machine Identity authentication is supported for this resource.

## Example Usage

```terraform
terraform {
  required_providers {
    infisical = {
      # version = <latest version>
      source = "infisical/infisical"
    }
  }
}

provider "infisical" {
  host = "https://app.infisical.com" # Only required if using self hosted instance of Infisical, default is https://app.infisical.com
  auth = {
    universal = {
      client_id     = "<machine-identity-client-id>"
      client_secret = "<machine-identity-client-secret>"
    }
  }
}

resource "infisical_integration_aws_secrets_manager" "secrets-manager-integration" {
  project_id  = "<project-id>"
  aws_region  = "<aws-region>" // example, us-east-2
  environment = "<env-slug>"   // example, dev

  secret_path = "<infisical-secrets-path>" // example, /folder, or /

  secrets_manager_path = "/example/secrets/" # Only required if mapping_behavior is one-to-one
  mapping_behavior     = "one-to-one"        # Optional, default is many-to-one

  # AWS Authentication
  access_key_id     = "<aws-access-key-id>"
  secret_access_key = "<aws-secret-access-key>"
  # OR
  assume_role_arn = "arn:aws:iam::<aws-account-id>:role/<role-name>"

  options = {
    secret_prefix = "<optional-prefix>"
    aws_tags = [
      {
        key   = "key",
        value = "value"
      },
    ]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `aws_region` (String) The AWS region to sync secrets to. (us-east-1, us-east-2, etc)
- `environment` (String) The slug of the environment to sync to AWS Secrets Manager (prod, dev, staging, etc).
- `project_id` (String) The ID of your Infisical project.
- `secret_path` (String) The secret path in Infisical to sync secrets from.

### Optional

- `access_key_id` (String, Sensitive) The AWS access key ID. Used to authenticate with AWS Secrets Manager. You must either set secret_access_key and access_key_id, or set assume_role_arn to assume a role.
- `assume_role_arn` (String) The ARN of the role to assume when syncing secrets to AWS Secrets Manager. You must either set secret_access_key and access_key_id, or set assume_role_arn to assume a role.
- `mapping_behavior` (String) The behavior of the mapping. Can be 'many-to-one' or 'one-to-one'. Many to One: All Infisical secrets will be mapped to a single AWS secret. One to One: Each Infisical secret will be mapped to its own AWS secret.
- `options` (Attributes) Integration options (see [below for nested schema](#nestedatt--options))
- `secret_access_key` (String, Sensitive) The AWS secret access key. Used to authenticate with AWS Secrets Manager. You must either set secret_access_key and access_key_id, or set assume_role_arn to assume a role.
- `secrets_manager_path` (String) The path in AWS Secrets Manager to sync secrets to. This is required if mapping_behavior is 'many-to-one'.

### Read-Only

- `integration_auth_id` (String) The ID of the integration auth, used internally by Infisical.
- `integration_id` (String) The ID of the integration, used internally by Infisical.

<a id="nestedatt--options"></a>
### Nested Schema for `options`

Optional:

- `aws_tags` (Attributes Set) Tags to attach to the AWS Secrets Manager secrets. (see [below for nested schema](#nestedatt--options--aws_tags))
- `metadata_sync_mode` (String) The sync mode for AWS tags. The supported options are `secret-metadata` and `custom`. If `secret-metadata` is selected, the metadata of the Infisical secrets are used as tags in AWS (only supported for one-to-one integrations). If `custom` is selected, then the key/value pairs in the `aws_tags` field is used.
- `secret_prefix` (String) The prefix to add to the secret name in AWS Secrets Manager.

<a id="nestedatt--options--aws_tags"></a>
### Nested Schema for `options.aws_tags`

Optional:

- `key` (String) The key of the tag.
- `value` (String) The value of the tag.
